---
title: ä¸­å›½è±¡æ£‹
---

![ç•Œé¢ä¸€è§ˆ](https://img-blog.csdnimg.cn/20190218212715127.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3E3MjM4OTI2eg==,size_16,color_FFFFFF,t_70#pic_center=500x)

<!-- more -->
## å‰è¨€
> å°æ—¶å€™ä¸€ç›´å’Œçˆ·çˆ·ä¸‹è±¡æ£‹ï¼Œå¯æ˜¯é™¤äº†è€èµ–ï¼Œå°±ä»æ¥æ²¡æœ‰èµ¢è¿‡(lllï¿¢Ï‰ï¿¢)

> æœ‰ä¸€æ¬¡åšæ¢¦...æˆ‘å†™å‡ºäº†ä¸€ä¸ªèƒ½èµ¢è¿‡çˆ·çˆ·çš„è±¡æ£‹AIï¼Œä½†å´æ²¡æœ‰æœºä¼šå’Œä»–ä¸‹äº†

> å°±è§‰å¾—æœ‰å¿…è¦åœ¨è¿˜æœ‰æœºä¼šçš„æ—¶å€™è‡ªå·±å†™ä¸€ä¸ªæ™ºèƒ½ä½“å‡ºæ¥ï¼Œä¹Ÿç®—æ˜¯ç»æˆ‘ä¹‹æ‰‹æ­£å¼åœ°èµ¢äº†çˆ·çˆ·(â—Ë‡âˆ€Ë‡â—)

## å…ˆç”»ä¸€ä¸ªæ£‹ç›˜
- ä»¥ä¸‹ä»£ç æ¥è‡ª[`æ¬²æ³ªæˆé›ª`](http://www.cnblogs.com/SeeYouBug/)çš„åŸåˆ›åˆ†äº«ï¼ŒåŠ ä¸Šæˆ‘é€‚å½“çš„ä¿®æ”¹
```html
<!DOCTYPE html>
    <!-- saved from url=(0037)https://www.maxmon.top/chinese_chess/ -->
    <html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta http-equiv="X-UA-Compatible" content="ie=edge">
        <title>ä¸­å›½è±¡æ£‹</title>
        <style>
        </style>
    </head>

    <body>
        <div class="layout">
            <canvas id="canvas1" style="background-color:burlywood" width="1005" height="1105">ä¸æ”¯æŒCanvas</canvas>
        </div>
        <script type="text/javascript">
            var object = {
                //åˆå§‹åŒ–
                init: function () {
                    //æ£‹ç›˜å¤–æ¡†
                    var canvas1 = document.getElementById("canvas1");
                    this.ctx = canvas1.getContext("2d");
                    this.ctx.lineWidth = 5;
                    this.ctx.clearRect(0, 0, 1005, 1105);
                    this.ctx.strokeStyle = "brown";
                    this.ctx.strokeRect(100, 100, 800, 900);

                    this.row();
                    this.cols();
                    this.drawFont();
                    //æ³¨æ„ï¼šç°åœ¨çš„åŸç‚¹ä¸­å¿ƒä¸ºï¼ˆ100,100ï¼‰ï¼Œæ‰€ä»¥ä¸‹é¢çš„æ‰€æœ‰åæ ‡åœ¨åŸæ¥çš„åŸºç¡€ä¸ŠåŠ ï¼ˆx+100,y+100ï¼‰ï¼›
                    //ä¸­å¿ƒç‚¹ä¸€ï¼ˆ1000,200ï¼‰
                    this.center(200, 300);
                    //ä¸­å¿ƒç‚¹äºŒï¼ˆ700,200ï¼‰
                    this.center(800, 300);
                    //ä¸­å¿ƒç‚¹ä¸‰ï¼ˆ5,300ï¼‰
                    this.center(100, 400);
                    //ä¸­å¿ƒç‚¹å››ï¼ˆ200,300ï¼‰
                    this.center(300, 400);
                    //ä¸­å¿ƒç‚¹äº”ï¼ˆ400,300ï¼‰
                    this.center(500, 400);
                    //ä¸­å¿ƒç‚¹å…­ï¼ˆ600,300ï¼‰
                    this.center(700, 400);
                    //ä¸­å¿ƒç‚¹ä¸ƒï¼ˆ800,300ï¼‰
                    this.center(900, 400);
                    //ä¸­å¿ƒç‚¹å…«ï¼ˆ800,600ï¼‰
                    this.center(900, 700);
                    //ä¸­å¿ƒç‚¹ä¹ï¼ˆ600,600ï¼‰
                    this.center(700, 700);
                    //ä¸­å¿ƒç‚¹åï¼ˆ400,600ï¼‰
                    this.center(500, 700);
                    //ä¸­å¿ƒç‚¹åä¸€ï¼ˆ200,600ï¼‰
                    this.center(300, 700);
                    //ä¸­å¿ƒç‚¹åäºŒï¼ˆ5,600ï¼‰
                    this.center(100, 700);
                    //ä¸­å¿ƒç‚¹åä¸‰ï¼ˆ700,700ï¼‰
                    this.center(800, 800);
                    //ä¸­å¿ƒç‚¹åå››ï¼ˆ100,700ï¼‰
                    this.center(200, 800);
                },
                //æ­¤æ–¹æ³•ç”¨æ¥ç”»æ£‹ç›˜çº¿
                LineDrawing: function (mx, my, lx, ly) {
                    this.ctx.beginPath();
                    this.ctx.moveTo(mx, my);
                    this.ctx.lineTo(lx, ly);
                    this.ctx.stroke();
                },
                //æ£‹ç›˜è¡Œ
                row: function () {
                    for (var i = 200; i <= 900; i += 100) {
                        this.ctx.beginPath();
                        this.ctx.moveTo(100, i);
                        this.ctx.lineTo(900, i);
                        this.ctx.stroke();
                    }
                },
                //æ£‹ç›˜åˆ—
                cols: function () {
                    for (var i = 200; i <= 800; i += 100) {
                        this.ctx.beginPath();
                        this.ctx.moveTo(i, 100);
                        this.ctx.lineTo(i, 1000);
                        this.ctx.stroke();
                    }
                    //æ¸…é™¤æŒ‡å®šçš„çŸ©å½¢åŒºåŸŸ
                    //this.ctx.clearRect(5, 402,795, 95);
                    this.ctx.clearRect(103, 502, 795, 95);
                    //æ–œçº¿
                    this.LineDrawing(400, 105, 600, 300);
                    this.LineDrawing(400, 805, 600, 1000);
                    //åæ–œçº¿
                    this.LineDrawing(600, 105, 400, 300);
                    this.LineDrawing(600, 805, 400, 1000);
                },
                //åæ ‡çš„ä¸­å¿ƒç‚¹
                center: function (x, y) {
                    this.ctx.lineWidth = 5;
                    //ä¸­å¿ƒç‚¹ä¸€ï¼ˆ100,200ï¼‰
                    //å·¦ä¸Š
                    this.LineDrawing(x - 10, y - 30, x - 10, y - 10);
                    this.LineDrawing(x - 10, y - 10, x - 30, y - 10);
                    //å³ä¸Š
                    this.LineDrawing(x + 10, y - 30, x + 10, y - 10);
                    this.LineDrawing(x + 10, y - 10, x + 30, y - 10);
                    //å·¦ä¸‹
                    this.LineDrawing(x - 10, y + 30, x - 10, y + 10);
                    this.LineDrawing(x - 10, y + 10, x - 30, y + 10);
                    //å³ä¸‹
                    this.LineDrawing(x + 10, y + 30, x + 10, y + 10);
                    this.LineDrawing(x + 10, y + 10, x + 30, y + 10);

                    this.ctx.stroke();
                },
                drawFont: function () {
                    this.ctx.lineWidth = 1;
                    //ç»˜åˆ¶æ–‡å­—
                    this.ctx.font = "60px microsoft yahei";
                    // this.ctx.fillStyle = "black";
                    this.ctx.save(); //ä¿å­˜ç‚¹
                    //å°†åæ ‡ä¸­å¿ƒä½œä¸ºèµ·å¯ç‚¹
                    this.ctx.translate(canvas1.width / 2, canvas1.height / 2);
                    var radian = Math.PI / 2; // å¼§åº¦åˆ¶ Math.PI=Ï€
                    this.ctx.rotate(radian); // æ—‹è½¬ç”»å¸ƒç»˜åˆ¶åˆ»åº¦
                    //å¡«å……
                    this.ctx.fillText("æ±‰", -30, -270);
                    this.ctx.fillText("ç•Œ", -30, -150);
                    this.ctx.restore(); //æ¢å¤åˆ°ä¿å­˜ç‚¹
                    this.ctx.save();
                    //å°†åæ ‡ä¸­å¿ƒä½œä¸ºèµ·ç‚¹
                    this.ctx.translate(canvas1.width / 2, canvas1.height / 2);
                    var radian = Math.PI / -2;
                    this.ctx.rotate(radian);
                    this.ctx.fillText("æ¥š", -30, -270);
                    this.ctx.fillText("æ²³", -30, -150);
                    this.ctx.restore();
                },
                drawRed(chessPieceName, _x, _y) {
                    this.drawChessPieces(chessPieceName, _x, _y, {
                        color: 'red',
                        fillColor: 'black'
                    })
                },
                drawBlack(chessPieceName, _x, _y) {
                    this.drawChessPieces(chessPieceName, _x, _y, {
                        color: 'white',
                        fillColor: 'black'
                    })
                },
                showRoad(chessPieceName, _x, _y, x, y) {
                    this.drawChessPieces(chessPieceName, _x, _y, {
                        color: 'blue',
                        fillColor: '',
                        r: 50
                    })
                },
                drawChoose(chessMap, roads, chessPieceName, _x, _y, x, y) {
                    // this.drawChessPieces(chessPieceName, _x, _y, {
                    //     color: 'blue',
                    //     fillColor: '',
                    //     r: 50
                    // })
                    roads.push({
                        _x, _y, x, y
                    })
                },
                drawChessPieces: function (chessPieceName, _x, _y, config) {
                    let x = (_x) * 100 + 100;
                    let y = (_y) * 100 + 100;
                    this.ctx.strokeStyle = config.color;
                    this.ctx.lineWidth = 5;
                    this.ctx.beginPath();
                    this.ctx.arc(x, y, config.r || 40, 0, 2 * Math.PI, true);
                    if (config.fillColor) {
                        this.ctx.fillStyle = config.fillColor;
                        this.ctx.fill();
                    }
                    this.ctx.stroke();
                    this.ctx.font = "60px microsoft yahei";
                    this.ctx.fillStyle = config.color;
                    this.ctx.fillText(chessPieceName, x - 30, y + 20);
                }
            };
            object.init();
        </script>
    </body>
</html>
```
> å‡ºæ¥çš„æ•ˆæœ

![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://img-blog.csdnimg.cn/20190218214254514.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3E3MjM4OTI2eg==,size_16,color_FFFFFF,t_70#pic_center=500x)
## æ”¾ç‚¹æ£‹å­åœ¨ä¸Šé¢å‘—
- å‚è€ƒäº†ç½‘ä¸Šçš„å¤šç§å®ç°æ–¹å¼åï¼Œæˆ‘å†™äº†æœ€é€‚åˆæˆ‘è‡ªå·±çš„ç”Ÿæˆæ£‹å­çš„æ–¹æ³•
```js
// é‡ç½®æ£‹ç›˜
function resetMap() {
    chessMap = [
        ['è½¦çº¢ä¸€', 'é©¬çº¢ä¸€', 'ç›¸çº¢ä¸€', 'ä»•çº¢ä¸€', 'å¸…çº¢ä¸€', 'ä»•çº¢äºŒ', 'ç›¸çº¢äºŒ', 'é©¬çº¢äºŒ', 'è½¦çº¢äºŒ'],
        ['ã€€ã€€ã€€', 'ã€€ã€€ã€€', 'ã€€ã€€ã€€', 'ã€€ã€€ã€€', 'ã€€ã€€ã€€', 'ã€€ã€€ã€€', 'ã€€ã€€ã€€', 'ã€€ã€€ã€€', 'ã€€ã€€ã€€'],
        ['ã€€ã€€ã€€', 'ç ²çº¢ä¸€', 'ã€€ã€€ã€€', 'ã€€ã€€ã€€', 'ã€€ã€€ã€€', 'ã€€ã€€ã€€', 'ã€€ã€€ã€€', 'ç ²çº¢äºŒ', 'ã€€ã€€ã€€'],
        ['å…µçº¢ä¸€', 'ã€€ã€€ã€€', 'å…µçº¢äºŒ', 'ã€€ã€€ã€€', 'å…µçº¢ä¸‰', 'ã€€ã€€ã€€', 'å…µçº¢å››', 'ã€€ã€€ã€€', 'å…µçº¢äº”'],
        ['ã€€ã€€ã€€', 'ã€€ã€€ã€€', 'ã€€ã€€ã€€', 'ã€€ã€€ã€€', 'ã€€ã€€ã€€', 'ã€€ã€€ã€€', 'ã€€ã€€ã€€', 'ã€€ã€€ã€€', 'ã€€ã€€ã€€'],
        ['ã€€ã€€ã€€', 'ã€€ã€€ã€€', 'ã€€ã€€ã€€', 'ã€€ã€€ã€€', 'ã€€ã€€ã€€', 'ã€€ã€€ã€€', 'ã€€ã€€ã€€', 'ã€€ã€€ã€€', 'ã€€ã€€ã€€'],
        ['å’é»‘ä¸€', 'ã€€ã€€ã€€', 'å’é»‘äºŒ', 'ã€€ã€€ã€€', 'å’é»‘ä¸‰', 'ã€€ã€€ã€€', 'å’é»‘å››', 'ã€€ã€€ã€€', 'å’é»‘äº”'],
        ['ã€€ã€€ã€€', 'ç‚®é»‘ä¸€', 'ã€€ã€€ã€€', 'ã€€ã€€ã€€', 'ã€€ã€€ã€€', 'ã€€ã€€ã€€', 'ã€€ã€€ã€€', 'ç‚®é»‘äºŒ', 'ã€€ã€€ã€€'],
        ['ã€€ã€€ã€€', 'ã€€ã€€ã€€', 'ã€€ã€€ã€€', 'ã€€ã€€ã€€', 'ã€€ã€€ã€€', 'ã€€ã€€ã€€', 'ã€€ã€€ã€€', 'ã€€ã€€ã€€', 'ã€€ã€€ã€€'],
        ['è½¦é»‘ä¸€', 'é©¬é»‘ä¸€', 'è±¡é»‘ä¸€', 'å£«é»‘ä¸€', 'å°†é»‘ä¸€', 'å£«é»‘äºŒ', 'è±¡é»‘äºŒ', 'é©¬é»‘äºŒ', 'è½¦é»‘äºŒ']
    ]
    side = 'çº¢';
    flushChessCanvas();
}
resetMap();
// ç”»å‡ºæ£‹å­
function flushChessCanvas() {
    object.init();
    for (let y = 0; y < chessMap.length; y++) {
        for (let x = 0; x < chessMap[y].length; x++) {
            let chess = chessMap[y][x];
            if (chess[1] == 'çº¢') {
                object.drawRed(chess[0], x, y)
            }
            if (chess[1] == 'é»‘') {
                object.drawBlack(chess[0], x, y)
            }
        }
    }
}
```
> ç›®å‰å°±å¤§è‡´å®ç°äº†æ–‡ç« å¼€å¤´çš„æ£‹ç›˜çš„æ•ˆæœï¼Œè‡³æ­¤ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°ä¸€å‰¯é…å¤‡å®Œæ•´çš„`è±¡æ£‹+æ£‹ç›˜`äº†ï¼ˆå¯ä»¥æ‹¿æ¥å–äº†(ï¿£â–½ï¿£)"ï¼‰
## æ‰€ä»¥ï¼Œæ€ä¹ˆèƒ½å°‘äº†è§„åˆ™å‘¢ï¼Ÿ
- è¿™é‡Œç›´æ¥ä¸Šä»£ç äº†ï¼Œæˆ‘æŒ‰[`è¶…é€¸_æµ`](https://me.csdn.net/u012723995)çš„æ–¹æ³•ï¼Œè‡ªå·±å®ç°äº†ä¸€è¾¹æ£‹ç›˜çš„ä¸»é€»è¾‘ï¼Œä¸»è¦æ¥åˆ¤æ–­æ¯ä¸€é¢—æ£‹å­å¯ä»¥è¡Œèµ°çš„è·¯å¾„
### è½¦é€»è¾‘
```js
// è½¦é€»è¾‘
function getJuRoad(map, roads, x, y) {
    let chessMap = map;
    let chess = chessMap[y][x];
    // ä¸Š
    for (let _y = y - 1, _x = x; _y > -1; _y--) {
        if (chessMap[_y][_x] === 'ã€€ã€€ã€€') {
            object.drawChoose(chessMap, roads, chess[0], _x, _y, x, y)
        }
        // åŒè‰²å­
        else if (chessMap[_y][_x][1] === chess[1]) {
            break;
        }
        // å¼‚è‰²å­
        else if (chessMap[_y][_x][1] !== chess[1]) {
            object.drawChoose(chessMap, roads, chess[0], _x, _y, x, y)
            break;
        }
    }
    // å³
    for (let _y = y, _x = x + 1; _x < 9; _x++) {
        if (chessMap[_y][_x] === 'ã€€ã€€ã€€') {
            object.drawChoose(chessMap, roads, chess[0], _x, _y, x, y)
        }
        // åŒè‰²å­
        else if (chessMap[_y][_x][1] === chess[1]) {
            break;
        }
        // å¼‚è‰²å­
        else if (chessMap[_y][_x][1] !== chess[1]) {
            object.drawChoose(chessMap, roads, chess[0], _x, _y, x, y)
            break;
        }
    }
    // ä¸‹
    for (let _y = y + 1, _x = x; _y < 10; _y++) {
        if (chessMap[_y][_x] === 'ã€€ã€€ã€€') {
            object.drawChoose(chessMap, roads, chess[0], _x, _y, x, y)
        }
        // åŒè‰²å­
        else if (chessMap[_y][_x][1] === chess[1]) {
            break;
        }
        // å¼‚è‰²å­
        else if (chessMap[_y][_x][1] !== chess[1]) {
            object.drawChoose(chessMap, roads, chess[0], _x, _y, x, y)
            break;
        }
    }
    // å·¦
    for (let _y = y, _x = x - 1; _x > -1; _x--) {
        if (chessMap[_y][_x] === 'ã€€ã€€ã€€') {
            object.drawChoose(chessMap, roads, chess[0], _x, _y, x, y)
        }
        // åŒè‰²å­
        else if (chessMap[_y][_x][1] === chess[1]) {
            break;
        }
        // å¼‚è‰²å­
        else if (chessMap[_y][_x][1] !== chess[1]) {
            object.drawChoose(chessMap, roads, chess[0], _x, _y, x, y)
            break;
        }
    }
}
// getJuRoad(0,0)
```
### é©¬é€»è¾‘
```js
// é©¬é€»è¾‘
function getMaRoad(map, roads, x, y) {
    let chessMap = map;
    let chess = chessMap[y][x];
    // 1ç‚¹é’Ÿæ–¹å‘
    if (x + 1 < 9 && y - 2 > -1 && chessMap[y - 1][x] === 'ã€€ã€€ã€€' && chessMap[y - 2][x + 1][1] != chess[1]) {
        object.drawChoose(chessMap, roads, chess[0], x + 1, y - 2, x, y)
    }
    // 2ç‚¹é’Ÿæ–¹å‘
    if (x + 2 < 9 && y - 1 > -1 && chessMap[y][x + 1] === 'ã€€ã€€ã€€' && chessMap[y - 1][x + 2][1] != chess[1]) {
        object.drawChoose(chessMap, roads, chess[0], x + 2, y - 1, x, y)
    }
    // 4ç‚¹é’Ÿæ–¹å‘
    if (x + 2 < 9 && y + 1 < 10 && chessMap[y][x + 1] === 'ã€€ã€€ã€€' && chessMap[y + 1][x + 2][1] != chess[1]) {
        object.drawChoose(chessMap, roads, chess[0], x + 2, y + 1, x, y)
    }
    // 5ç‚¹é’Ÿæ–¹å‘
    if (x + 1 < 9 && y + 2 < 10 && chessMap[y + 1][x] === 'ã€€ã€€ã€€' && chessMap[y + 2][x + 1][1] != chess[1]) {
        object.drawChoose(chessMap, roads, chess[0], x + 1, y + 2, x, y)
    }
    // 7ç‚¹é’Ÿæ–¹å‘
    if (x - 1 > -1 && y + 2 < 10 && chessMap[y + 1][x] === 'ã€€ã€€ã€€' && chessMap[y + 2][x - 1][1] != chess[1]) {
        object.drawChoose(chessMap, roads, chess[0], x - 1, y + 2, x, y)
    }
    // 8ç‚¹é’Ÿæ–¹å‘
    if (x - 2 > -1 && y + 1 < 10 && chessMap[y][x - 1] === 'ã€€ã€€ã€€' && chessMap[y + 1][x - 2][1] != chess[1]) {
        object.drawChoose(chessMap, roads, chess[0], x - 2, y + 1, x, y)
    }
    // 10ç‚¹é’Ÿæ–¹å‘
    if (x - 2 > -1 && y - 1 > -1 && chessMap[y][x - 1] === 'ã€€ã€€ã€€' && chessMap[y - 1][x - 2][1] != chess[1]) {
        object.drawChoose(chessMap, roads, chess[0], x - 2, y - 1, x, y)
    }
    // 11ç‚¹é’Ÿæ–¹å‘
    if (x - 1 > -1 && y - 2 > -1 && chessMap[y - 1][x] === 'ã€€ã€€ã€€' && chessMap[y - 2][x - 1][1] != chess[1]) {
        object.drawChoose(chessMap, roads, chess[0], x - 1, y - 2, x, y)
    }
}
// getMaRoad(1,0)
```
### è±¡é€»è¾‘
```js
// è±¡é€»è¾‘
function getXiangRoad(map, roads, x, y, side) {
    let chessMap = map;
    let chess = chessMap[y][x];
    // 1ç‚¹åŠæ–¹å‘
    if (y - 2 > -1 && x + 2 < 9 && chessMap[y - 1][x + 1] === 'ã€€ã€€ã€€' && chessMap[y - 2][x + 2][1] != chess[1]) {
        if (side == 'é»‘' && (y - 2) > 4) {
            object.drawChoose(chessMap, roads, chess[0], x + 2, y - 2, x, y)
        }
        if (side == 'çº¢' && (y - 2) < 5) {
            object.drawChoose(chessMap, roads, chess[0], x + 2, y - 2, x, y)
        }
    }
    // 4ç‚¹åŠæ–¹å‘
    if (y + 2 < 10 && x + 2 < 9 && chessMap[y + 1][x + 1] === 'ã€€ã€€ã€€' && chessMap[y + 2][x + 2][1] != chess[1]) {
        if (side == 'é»‘' && (y + 2) > 4) {
            object.drawChoose(chessMap, roads, chess[0], x + 2, y + 2, x, y)
        }
        if (side == 'çº¢' && (y + 2) < 5) {
            object.drawChoose(chessMap, roads, chess[0], x + 2, y + 2, x, y)
        }
    }
    // 7ç‚¹åŠæ–¹å‘
    if (y + 2 < 10 && x - 2 > -1 && chessMap[y + 1][x - 1] === 'ã€€ã€€ã€€' && chessMap[y + 2][x - 2][1] != chess[1]) {
        if (side == 'é»‘' && (y + 2) > 4) {
            object.drawChoose(chessMap, roads, chess[0], x - 2, y + 2, x, y)
        }
        if (side == 'çº¢' && (y + 2) < 5) {
            object.drawChoose(chessMap, roads, chess[0], x - 2, y + 2, x, y)
        }
    }
    // 10ç‚¹åŠæ–¹å‘
    if (y - 2 > -1 && x - 2 > -1 && chessMap[y - 1][x - 1] === 'ã€€ã€€ã€€' && chessMap[y - 2][x - 2][1] != chess[1]) {
        if (side == 'é»‘' && (y - 2) > 4) {
            object.drawChoose(chessMap, roads, chess[0], x - 2, y - 2, x, y)
        }
        if (side == 'çº¢' && (y - 2) < 5) {
            object.drawChoose(chessMap, roads, chess[0], x - 2, y - 2, x, y)
        }
    }
}
// getXiangRoad(2,0,'çº¢')
```
### å£«é€»è¾‘
```js
// å£«é€»è¾‘
function getShiRoad(map, roads, x, y, side) {
    let chessMap = map;
    let chess = chessMap[y][x];
    // 1ç‚¹åŠæ–¹å‘
    if (y - 1 > -1 && x + 1 < 9 && chessMap[y - 1][x + 1][1] != chess[1]) {
        if (side == 'é»‘' && (y - 1) > 6 && (x + 1) > 2 && (x + 1) < 6) {
            object.drawChoose(chessMap, roads, chess[0], x + 1, y - 1, x, y)
        }
        if (side == 'çº¢' && (y - 1) < 3 && (x + 1) > 2 && (x + 1) < 6) {
            object.drawChoose(chessMap, roads, chess[0], x + 1, y - 1, x, y)
        }
    }
    // 4ç‚¹åŠæ–¹å‘
    if (y + 1 < 10 && x + 1 < 9 && chessMap[y + 1][x + 1][1] != chess[1]) {
        if (side == 'é»‘' && (y + 1) > 6 && (x + 1) > 2 && (x + 1) < 6) {
            object.drawChoose(chessMap, roads, chess[0], x + 1, y + 1, x, y)
        }
        if (side == 'çº¢' && (y + 1) < 3 && (x + 1) > 2 && (x + 1) < 6) {
            object.drawChoose(chessMap, roads, chess[0], x + 1, y + 1, x, y)
        }
    }
    // 7ç‚¹åŠæ–¹å‘
    if (y + 1 < 10 && x - 1 > -1 && chessMap[y + 1][x - 1][1] != chess[1]) {
        if (side == 'é»‘' && (y + 1) > 6 && (x - 1) > 2 && (x - 1) < 6) {
            object.drawChoose(chessMap, roads, chess[0], x - 1, y + 1, x, y)
        }
        if (side == 'çº¢' && (y + 1) < 3 && (x - 1) > 2 && (x - 1) < 6) {
            object.drawChoose(chessMap, roads, chess[0], x - 1, y + 1, x, y)
        }
    }
    // 10ç‚¹åŠæ–¹å‘
    if (y - 1 > -1 && x - 1 > -1 && chessMap[y - 1][x - 1][1] != chess[1]) {
        if (side == 'é»‘' && (y - 1) > 6 && (x - 1) > 2 && (x - 1) < 6) {
            object.drawChoose(chessMap, roads, chess[0], x - 1, y - 1, x, y)
        }
        if (side == 'çº¢' && (y - 1) < 3 && (x - 1) > 2 && (x - 1) < 6) {
            object.drawChoose(chessMap, roads, chess[0], x - 1, y - 1, x, y)
        }
    }
}
// getShiRoad(3,0,'çº¢')
```
### å°†é€»è¾‘
```js
// å°†é€»è¾‘
function getJiangRoad(map, roads, x, y, side) {
    let chessMap = map;
    let chess = chessMap[y][x];
    // å¯¹é˜µ
    if (side == 'é»‘') {
        for (let _y = y-1;_y > -1; _y--) {
            if (chessMap[_y][x][0] === 'å¸…') {
                object.drawChoose(chessMap, roads, chess[0], x, _y, x, y)
            }
            if (chessMap[_y][x] !== 'ã€€ã€€ã€€') {
                break;
            }
        }
    }
    if (side == 'çº¢') {
        for (let _y = y+1;_y < 10; _y++) {
            if (chessMap[_y][x][0] === 'å°†') {
                object.drawChoose(chessMap, roads, chess[0], x, _y, x, y)
            }
            if (chessMap[_y][x] !== 'ã€€ã€€ã€€') {
                break;
            }
        }
    }
    // ä¸Š
    if (y - 1 > -1 && chessMap[y - 1][x][1] != chess[1]) {
        if (side == 'é»‘' && (y - 1) > 6) {
            object.drawChoose(chessMap, roads, chess[0], x, y - 1, x, y)
        }
        if (side == 'çº¢') {
            object.drawChoose(chessMap, roads, chess[0], x, y - 1, x, y)
        }
    }
    // å³
    if (x + 1 < 6 && chessMap[y][x + 1][1] != chess[1]) {
        object.drawChoose(chessMap, roads, chess[0], x + 1, y, x, y)
    }
    // ä¸‹
    if (y + 1 < 10 && chessMap[y + 1][x][1] != chess[1]) {
        if (side == 'é»‘') {
            object.drawChoose(chessMap, roads, chess[0], x, y + 1, x, y)
        }
        if (side == 'çº¢' && (y + 1) < 3) {
            object.drawChoose(chessMap, roads, chess[0], x, y + 1, x, y)
        }
    }
    // å·¦
    if (x - 1 > 2 && chessMap[y][x - 1][1] != chess[1]) {
        object.drawChoose(chessMap, roads, chess[0], x - 1, y, x, y)
    }
}
// getJiangRoad(4,0,'çº¢')
```
### ç‚®é€»è¾‘
```js
// ç‚®é€»è¾‘
function getPaoRoad(map, roads, x, y) {
    let chessMap = map;
    let chess = chessMap[y][x];
    let count = 0;
    // ä¸Š
    for (let _y = y - 1, _x = x; _y > -1; _y--) {
        if (count == 0) {
            if (chessMap[_y][_x] === 'ã€€ã€€ã€€') {
                object.drawChoose(chessMap, roads, chess[0], _x, _y, x, y)
            } else {
                count++;
            }
        } else {
            // ç©ºç™½
            if (chessMap[_y][_x] === 'ã€€ã€€ã€€') {
                continue;
            }
            // åŒè‰²å­
            else if (chessMap[_y][_x][1] === chess[1]) {
                break;
            }
            // å¼‚è‰²å­
            else if (chessMap[_y][_x][1] !== chess[1]) {
                object.drawChoose(chessMap, roads, chess[0], _x, _y, x, y)
                break;
            }
        }
    }
    count = 0;
    // å³
    for (let _y = y, _x = x + 1; _x < 9; _x++) {
        if (count == 0) {
            if (chessMap[_y][_x] === 'ã€€ã€€ã€€') {
                object.drawChoose(chessMap, roads, chess[0], _x, _y, x, y)
            } else {
                count++;
            }
        } else {
            // ç©ºç™½
            if (chessMap[_y][_x] === 'ã€€ã€€ã€€') {
                continue;
            }
            // åŒè‰²å­
            else if (chessMap[_y][_x][1] === chess[1]) {
                break;
            }
            // å¼‚è‰²å­
            else if (chessMap[_y][_x][1] !== chess[1]) {
                object.drawChoose(chessMap, roads, chess[0], _x, _y, x, y)
                break;
            }
        }
    }
    count = 0;
    // ä¸‹
    for (let _y = y + 1, _x = x; _y < 10; _y++) {
        if (count == 0) {
            if (chessMap[_y][_x] === 'ã€€ã€€ã€€') {
                object.drawChoose(chessMap, roads, chess[0], _x, _y, x, y)
            } else {
                count++;
            }
        } else {
            // ç©ºç™½
            if (chessMap[_y][_x] === 'ã€€ã€€ã€€') {
                continue;
            }
            // åŒè‰²å­
            else if (chessMap[_y][_x][1] === chess[1]) {
                break;
            }
            // å¼‚è‰²å­
            else if (chessMap[_y][_x][1] !== chess[1]) {
                object.drawChoose(chessMap, roads, chess[0], _x, _y, x, y)
                break;
            }
        }
    }
    count = 0;
    // å·¦
    for (let _y = y, _x = x - 1; _x > -1; _x--) {
        if (count == 0) {
            if (chessMap[_y][_x] === 'ã€€ã€€ã€€') {
                object.drawChoose(chessMap, roads, chess[0], _x, _y, x, y)
            } else {
                count++;
            }
        } else {
            // ç©ºç™½
            if (chessMap[_y][_x] === 'ã€€ã€€ã€€') {
                continue;
            }
            // åŒè‰²å­
            else if (chessMap[_y][_x][1] === chess[1]) {
                break;
            }
            // å¼‚è‰²å­
            else if (chessMap[_y][_x][1] !== chess[1]) {
                object.drawChoose(chessMap, roads, chess[0], _x, _y, x, y)
                break;
            }
        }
    }
}
// getPaoRoad(1, 2)
```
### å’é€»è¾‘
```js
// å’é€»è¾‘
function getZuRoad(map, roads, x, y, side) {
    let chessMap = map;
    let chess = chessMap[y][x];
    // ä¸Š
    if (side == 'é»‘') {
        if (y-1>-1 && chessMap[y-1][x][1] != 'é»‘') {
            object.drawChoose(chessMap, roads, chess[0], x, y-1, x, y);
        }
    }
    // å³
    if (side == 'é»‘' && y < 5) {
        if (x+1<9 && chessMap[y][x+1][1] != 'é»‘') {
            object.drawChoose(chessMap, roads, chess[0], x+1, y, x, y);
        }
    }
    if (side == 'çº¢' && y > 4) {
        if (x+1<9 && chessMap[y][x+1][1] != 'çº¢') {
            object.drawChoose(chessMap, roads, chess[0], x+1, y, x, y);
        }
    }
    // ä¸‹
    if (side == 'çº¢') {
        if (y+1<10 && chessMap[y+1][x][1] != 'çº¢') {
            object.drawChoose(chessMap, roads, chess[0], x, y+1, x, y);
        }
    }
    // å·¦
    if (side == 'é»‘' && y < 5) {
        if (x-1>-1 && chessMap[y][x-1][1] != 'é»‘') {
            object.drawChoose(chessMap, roads, chess[0], x-1, y, x, y);
        }
    }
    if (side == 'çº¢' && y > 4) {
        if (x-1>-1 && chessMap[y][x-1][1] != 'çº¢') {
            object.drawChoose(chessMap, roads, chess[0], x-1, y, x, y);
        }
    }
}
// getZuRoad(0,3,'çº¢')
```
> æ‰€ä»¥ï¼Œåˆ°äº†è¿™å„¿ï¼Œæˆ‘ä»¬æ‰‹ä¸­çš„ä¸€é¢—é¢—æ£‹å­ğŸš©ï¼Œå°±çŸ¥é“ä»–ä»¬å„è‡ªèƒ½èµ°åˆ°å“ªé‡Œäº†~
## æ¥åˆ°äº†å¤§å®¶ä¼šæ„Ÿå…´è¶£çš„AIéƒ¨åˆ†äº†
- åŒæ ·ï¼Œå‚è€ƒäº†[`è¶…é€¸_æµ`](https://me.csdn.net/u012723995)çš„`è±¡æ£‹AIç®—æ³•`ç®—æ³•
> è¯´å®è¯ï¼Œæˆ‘æ˜¯æ²¡æ€ä¹ˆçœ‹æ‡‚ï¼Œä»€ä¹ˆæœ€å°-æœ€å¤§æœç´¢å•¦ï¼Œä»€ä¹ˆè´Ÿå€¼æœ€å¤§å‡½æ•°ï¼Œä»€ä¹ˆAlpha-Betaæœç´¢é€šé€šæ˜¯æµ®äº‘å“ˆå“ˆå“ˆo(*ï¿£â–½ï¿£*)oï¼Œæˆ‘æŒ‰æˆ‘è‡ªå·±çš„ç†è§£å…ˆå†™å†è¯´~
```js

function doScore(chess, nowScore) {
    let _side = chess[1];
    let _chessName = chess[0];
    if (_side == 'é»‘') {
        nowScore[_side] = nowScore[_side] ? nowScore[_side] + scoreDic[_chessName] : scoreDic[_chessName];
    }
    if (_side == 'çº¢') {
        nowScore[_side] = nowScore[_side] ? nowScore[_side] + scoreDic[_chessName] : scoreDic[_chessName];
    }
}
function getNowScore(map) {
    let nowScore = {
        é»‘: 0,
        çº¢: 0
    }
    for (let y = 0; y < chessMap.length; y++) {
        for (let x = 0; x < chessMap[y].length; x++) {
            let chess = chessMap[y][x];
            doScore(chess, nowScore);
        }
    }
    return nowScore;
}
// ä¼šå¡æ­»ï¼Œæœ€åæ‰å‡ºæ•ˆæœï¼Œç›®å‰æ²¡æœ‰æ•ˆæœ
function addLoadingLayer() {
    document.getElementsByClassName('loading-layer')[0].style.display = 'inline-block';
}
function removeLoadingLayer() {
    document.getElementsByClassName('loading-layer')[0].style.display = 'none';
}
let startTime;
let endTime;
let ccc = 0;
function checkAllChess(map=chessMap, parentSide=side, steps=[], parentScoreSum=0) {
    let chessMap = map;
    calNum++
    let roads = [];
    if (steps.length == 0) {
        console.log('chessMap', JSON.parse(JSON.stringify(chessMap)))
        startTime = new Date().getTime();
        addLoadingLayer();
        bestSteps = [];
        allSteps = [];
        bestScore = -Infinity;
    }
    if (steps.length == 1) {
        console.log(++ccc);
    }
    // è®¡ç®—å“ªä¸€è¾¹
    let mainSide = parentSide;
    if (steps.length % 2 == 1 ) {
        mainSide = mainSide == 'é»‘' ? 'çº¢' : 'é»‘';
    }
    // round++
    let isAlive = false;
    for (let y = 0; y < chessMap.length; y++) {
        for (let x = 0; x < chessMap[y].length; x++) {
            let chess = chessMap[y][x];
            if (chess[1] == parentSide) {
                if (chess[0] == 'è½¦') {
                    getJuRoad(chessMap, roads, x, y);
                }
                if (chess[0] == 'é©¬') {
                    getMaRoad(chessMap, roads, x, y);
                }
                if (chess[0] == 'è±¡' || chess[0] == 'ç›¸') {
                    getXiangRoad(chessMap, roads, x, y, chess[1]);
                }
                if (chess[0] == 'å£«' || chess[0] == 'ä»•') {
                    getShiRoad(chessMap, roads, x, y, chess[1]);
                }
                if (chess[0] == 'ç‚®' || chess[0] == 'ç ²') {
                    getPaoRoad(chessMap, roads, x, y)
                }
                if (chess[0] == 'å’' || chess[0] == 'å…µ') {
                    getZuRoad(chessMap, roads, x, y, chess[1]);
                }
                if (chess[0] == 'å°†' || chess[0] == 'å¸…') {
                    getJiangRoad(chessMap, roads, x, y, chess[1]);
                    isAlive = true;
                }
            }
        }
    }
    if (isAlive && round < 1000) {
        let localBestScore = parentSide == mainSide ? -Infinity : Infinity;
        // let road = roads[roads.length*Math.random()|0];
        for (let i = 0; i < roads.length; i++) {
            let _side = parentSide;
            let road = roads[i];
            let _map = JSON.parse(JSON.stringify(map))
            // map æ”¹å˜åŸåœ°å›¾ï¼Œ_mapæ”¹å˜æ¨¡æ‹Ÿåœ°å›¾
            let eatedChess = _map[road._y][road._x];
            let playChess = _map[road.y][road.x];
            let score = downChess(_map, road._x, road._y, road.x, road.y, false);
            let scoreSum = parentScoreSum;
            let _steps = JSON.parse(JSON.stringify(steps));
            if (_side == mainSide) {
                score = score * (times  - _steps.length);
            } else {
                score = -score * (times  - _steps.length);
            }
            scoreSum += score;
            _steps.push({
                score,
                _x: road._x,
                _y: road._y,
                x: road.x,
                y: road.y,
                playChess,
                eatedChess,
                id: uuid() 
            })
            if (_steps.length < times) {
                // _side = changeSide(_side);
                // checkAllChess(_map, _side, _steps, scoreSum);
                if (_side == mainSide && score >= localBestScore ) {
                    localBestScore = score;
                    if (score == localBestScore && Math.random()>.5) {
                        _side = changeSide(_side);
                        checkAllChess(_map, _side, _steps, scoreSum);
                    } else {
                        _side = changeSide(_side);
                        checkAllChess(_map, _side, _steps, scoreSum);
                    }
                }
                if (_side != mainSide && score <= localBestScore ) {
                    localBestScore = score;
                    if (score == localBestScore && Math.random()>.5) {
                        _side = changeSide(_side);
                        checkAllChess(_map, _side, _steps, scoreSum);
                    } else {
                        _side = changeSide(_side);
                        checkAllChess(_map, _side, _steps, scoreSum);
                    }
                }
            } else {
                allSteps.push(_steps);
                if (scoreSum > bestScore) {
                    bestScore = scoreSum;
                    bestSteps = _steps;
                }
            }
        }
    } else {
        let scoreSum = parentScoreSum;
        if (scoreSum > bestScore) {
            bestScore = scoreSum;
            bestSteps = steps;
        }
        // countFinal();
    }
    calNum--;
    if (calNum == 0) {
        endTime = new Date().getTime();
        removeLoadingLayer();
        let finalDic = {};
        for (let i = 0; i < allSteps.length; i++) {
            let _steps = allSteps[i];
            let accScore = 0;
            for (let j = 0; j < times; j++) {
                _steps[j] = _steps[j] || {
                    score: 0,
                    _x: -1,
                    _y: -1,
                    x: -1,
                    y: -1,
                    playChess: 'ã€€ã€€ã€€',
                    eatedChess: 'ã€€ã€€ã€€'
                }
                accScore += _steps[j].score;
                _steps[j].accScore = accScore;
            }
            _steps[times - 1].in = 1;
            for (let j = 0; j < times; j++) {
                _steps[j].finalScore = accScore;
            }
        }

        let accCheckDic = {};
        console.log('---------------',accCheckDic['-'])
        for (let j = times - 1; j > -1; j--) {
            if (j % 2 == 0) {
                // è‡ªå·±æ–¹ï¼Œè¶Šå¤§è¶Šå¥½
                for (let i = 0; i < allSteps.length; i++) {
                    let _steps = allSteps[i];
                    let self = _steps[j];
                    if (!self.in) {
                        continue;
                    }
                    let parent = _steps[j - 1] || {};
                    let parentKey = parent.id || '-';
                    if (!accCheckDic[parentKey]) {
                        accCheckDic[parentKey] = {
                            bestId: '',
                            bestFinalScore: ((j % 2)-.5)*2*Infinity
                        }
                    }
                    if (accCheckDic[parentKey].bestFinalScore < self.finalScore) {
                        try {
                            delete accCheckDic[parentKey].parent.in;
                        } catch(err) {

                        }
                        accCheckDic[parentKey] = {
                            bestId: self.id,
                            level: j,
                            bestFinalScore: self.finalScore,
                            parent: parent,
                            src: self
                        }
                        parent.in = 1;
                    }
                }
            }
            if (j % 2 == 1) {
                // æ•Œå¯¹æ–¹ï¼Œè¶Šå°è¶Šå¥½
                for (let i = 0; i < allSteps.length; i++) {
                    let _steps = allSteps[i];
                    let self = _steps[j];
                    if (!self.in) {
                        continue;
                    }
                    let parent = _steps[j - 1] || {};
                    let parentKey = parent.id || '-';
                    if (!accCheckDic[parentKey]) {
                        accCheckDic[parentKey] = {
                            bestId: '',
                            bestFinalScore: ((j % 2)-.5)*2*Infinity
                        }
                    }
                    if (accCheckDic[parentKey].bestFinalScore > self.finalScore) {
                        try {
                            delete accCheckDic[parentKey].parent.in;
                        } catch(err) {

                        }
                        accCheckDic[parentKey] = {
                            bestId: self.id,
                            level: j,
                            bestFinalScore: self.finalScore,
                            parent: parent,
                            src: self
                        }
                        parent.in = 1;
                    }
                }
            }
        }
        console.log(accCheckDic)
        console.log(accCheckDic['-'])
        console.log(accCheckDic[accCheckDic['-'].bestId])
        console.log(allSteps);
        console.log(map)
        downChess(map, accCheckDic['-'].src._x, accCheckDic['-'].src._y, accCheckDic['-'].src.x, accCheckDic['-'].src.y, true);
    }
}
let dic = {};
function countFinal() {
    dic['count'] = dic['count'] ? dic['count'] + 1 : 1;
    dic[round] = dic[round] ? dic[round] + 1 : 1;
    for (let y = 0; y < chessMap.length; y++) {
        for (let x = 0; x < chessMap[y].length; x++) {
            let chess = chessMap[y][x];
            if (chess !== 'ã€€ã€€ã€€') {
                dic[chess] = dic[chess] ? dic[chess]+1 : 1;
            }
        }
    }
    chessMap = [
        ['è½¦çº¢ä¸€', 'é©¬çº¢ä¸€', 'ç›¸çº¢ä¸€', 'ä»•çº¢ä¸€', 'å¸…çº¢ä¸€', 'ä»•çº¢äºŒ', 'ç›¸çº¢äºŒ', 'é©¬çº¢äºŒ', 'è½¦çº¢äºŒ'],
        ['ã€€ã€€ã€€', 'ã€€ã€€ã€€', 'ã€€ã€€ã€€', 'ã€€ã€€ã€€', 'ã€€ã€€ã€€', 'ã€€ã€€ã€€', 'ã€€ã€€ã€€', 'ã€€ã€€ã€€', 'ã€€ã€€ã€€'],
        ['ã€€ã€€ã€€', 'ç ²çº¢ä¸€', 'ã€€ã€€ã€€', 'ã€€ã€€ã€€', 'ã€€ã€€ã€€', 'ã€€ã€€ã€€', 'ã€€ã€€ã€€', 'ç ²çº¢äºŒ', 'ã€€ã€€ã€€'],
        ['å…µçº¢ä¸€', 'ã€€ã€€ã€€', 'å…µçº¢äºŒ', 'ã€€ã€€ã€€', 'å…µçº¢ä¸‰', 'ã€€ã€€ã€€', 'å…µçº¢å››', 'ã€€ã€€ã€€', 'å…µçº¢äº”'],
        ['ã€€ã€€ã€€', 'ã€€ã€€ã€€', 'ã€€ã€€ã€€', 'ã€€ã€€ã€€', 'ã€€ã€€ã€€', 'ã€€ã€€ã€€', 'ã€€ã€€ã€€', 'ã€€ã€€ã€€', 'ã€€ã€€ã€€'],
        ['ã€€ã€€ã€€', 'ã€€ã€€ã€€', 'ã€€ã€€ã€€', 'ã€€ã€€ã€€', 'ã€€ã€€ã€€', 'ã€€ã€€ã€€', 'ã€€ã€€ã€€', 'ã€€ã€€ã€€', 'ã€€ã€€ã€€'],
        ['å’é»‘ä¸€', 'ã€€ã€€ã€€', 'å’é»‘äºŒ', 'ã€€ã€€ã€€', 'å’é»‘ä¸‰', 'ã€€ã€€ã€€', 'å’é»‘å››', 'ã€€ã€€ã€€', 'å’é»‘äº”'],
        ['ã€€ã€€ã€€', 'ç‚®é»‘ä¸€', 'ã€€ã€€ã€€', 'ã€€ã€€ã€€', 'ã€€ã€€ã€€', 'ã€€ã€€ã€€', 'ã€€ã€€ã€€', 'ç‚®é»‘äºŒ', 'ã€€ã€€ã€€'],
        ['ã€€ã€€ã€€', 'ã€€ã€€ã€€', 'ã€€ã€€ã€€', 'ã€€ã€€ã€€', 'ã€€ã€€ã€€', 'ã€€ã€€ã€€', 'ã€€ã€€ã€€', 'ã€€ã€€ã€€', 'ã€€ã€€ã€€'],
        ['è½¦é»‘ä¸€', 'é©¬é»‘ä¸€', 'è±¡é»‘ä¸€', 'å£«é»‘ä¸€', 'å°†é»‘ä¸€', 'å£«é»‘äºŒ', 'è±¡é»‘äºŒ', 'é©¬é»‘äºŒ', 'è½¦é»‘äºŒ']
    ]
    round = 0;
}

function downChess(map, _x, _y, x, y, isFlush=true) {
    if (_x==x&&_y==y) {
        return false;
    }
    let chessMap = map;
    let chess = chessMap[y][x].toString();
    chessMap[y][x] = 'ã€€ã€€ã€€';
    eatedChess = chessMap[_y][_x].toString();
    chessMap[_y][_x] = chess;
    if (isFlush) {
        flushChessCanvas();
        side = side == 'é»‘' ? 'çº¢' : 'é»‘';

        if (isGameMode && eatedChess[0] == 'å¸…') {
            alert('é»‘æ–¹èƒœ');
        }
        if (isGameMode && eatedChess[0] == 'å°†') {
            alert('çº¢æ–¹èƒœ');
        }
    }
    
    return scoreDic[eatedChess[0]];
}
function changeSide(side) {
    if (side == 'é»‘') {
        side = 'çº¢';
    } else {
        side = 'é»‘';
    }
    return side;
}
flushChessCanvas()
```
> è¿™ä¹ˆå¤§ä¸€ä¸²ï¼Œæˆ‘çŒœä½ ä»¬ä¹Ÿä¸ä¼šå»çœ‹ï¼Œç»™ä½ ä»¬å¤§è‡´è®²ä¸€ä¸‹å§

> å¤§æ¦‚å°±æ˜¯æœç´¢æ¯ä¸€æ­¥æ¯ä¸€æ–¹å¯èµ°çš„è·¯å¾„ï¼Œå¤§çº¦æœ‰`40`ç§å¯é€‰è·¯å¾„ï¼Œç„¶åå†è¿™`40`ç§ä¸­éšæœºæŒ‘é€‰`1`æ¡è·¯ï¼Œä¸€ç›´è®¡ç®—ä¸‹å»

> å½“ç„¶ï¼Œå¯¹æ‰‹ä¹Ÿä¸ä¼šå¤ªç¬¨ï¼Œä»–ä¹Ÿä¼šä»è¿™äº›ä¸­é—´æŒ‘`1`ç§èµ°æ³•ï¼Œè€Œä¸”æ˜¯æœ€æœ‰åˆ©äºä»–çš„æ–¹æ³•ï¼ˆå½“ç„¶ä¹Ÿå¯ä»¥é€‰ä¸åˆ©äºä»–çš„ï¼Œä½†ä»–å¦‚æœé€‰äº†ï¼Œæˆ‘ä»¬èµ¢å¾—æ¦‚ç‡ä¸€å®šæ›´å¤§äº†ï¼‰

> æ‰€ä»¥å±‚å±‚ä¸‹å»ï¼Œç®—å‡ºå½“ä¸‹æœ€åˆ©äºæˆ‘ä»¬çš„é‚£ä¸€æ¡è·¯ï¼ˆè€ƒè™‘åˆ°å¯¹æ‰‹é€‰æœ€å¥½çš„æƒ…å†µä¸‹ï¼‰
## å®ç°äº†AIåï¼Œä¸èƒ½èµ°ä¹Ÿä¸è¡Œå•Š
- æ‰€ä»¥ï¼Œæˆ‘å®ç°äº†ä¸‹æ£‹çš„æ–¹æ³•
### åˆ¤æ–­ç‚¹å‡»çš„ä½ç½®
- å¦‚æœåŸå…ˆæœªé€‰ä¸­æ£‹å­ï¼Œå°±è¿›å…¥é€‰æ‹©è½å­çŠ¶æ€
- å¦‚æœåŸå…ˆé€‰äº†æ£‹å­ï¼Œå°±å®Œæˆè½å­
- å¦‚æœæ²¡é€‰ä¸­æ£‹å­/æˆ–è€…é€‰äº†é”™è¯¯çš„è½å­ç‚¹ï¼Œå°±ä¸äºˆä»¥ååº”
```js
let roads = [];
let selectedWhat = null;
canvas1.addEventListener('click', (e)=>{
    let viewWidth = window.innerWidth;
    if (viewWidth > 1000) {
        viewWidth = 1000;
    }
    let canvasWidth = 1005;
    let ctx = canvas1.getContext('2d');
    ctx.fillStyle = 'black';
    let locX = e.clientX/viewWidth*canvasWidth;
    let locY = e.clientY/viewWidth*canvasWidth;
    let r = 50;
    let x = (locX+r-100)/100|0;
    let y = (locY+r-100)/100|0;
    for (let i = 0; i < roads.length; i++) {
        let road = roads[i];
        if (road._x == x && road._y == y) {
            let chess = chessMap[road.y][road.x];
            downChess(chessMap, road._x, road._y, road.x, road.y);
            side = chess[1] == 'é»‘' ? 'çº¢' : 'é»‘';
            roads = [];
            selectedWhat = null;
            return;
            break;
        }
    }
    if (chessMap[y][x] != 'ã€€ã€€ã€€') {
        // ctx.fillText(`(${x},${y})${chessMap[y][x]}`, locX, locY);
        selectedWhat = selectedWhat == chessMap[y][x] ? null : chessMap[y][x];
        if (selectedWhat) {
            ctx.fillStyle = 'blue';
            flushChessCanvas();
            roads = [];
            getChessRoads(chessMap, x, y);
        } else {
            flushChessCanvas();
            roads = [];
        }
    }
})
let autoBtn = document.querySelector('#auto-btn');
autoBtn.onclick = function() {
    checkAllChess()
}
let resetBtn = document.querySelector('#reset-btn');
resetBtn.onclick = function() {
    resetMap();
}
```
### å¾—å‡ºé€‰ä¸­æ£‹å­çš„å¯èµ°è·¯å¾„ï¼ˆå¯è½å­ç‚¹ï¼‰
```js
function getChessRoads(map=chessMap, x, y) {
    let chessMap = map;
    let chess = chessMap[y][x];
    let isAlive = false;
    if (chess[0] == 'è½¦') {
        getJuRoad(chessMap, roads, x, y);
    }
    if (chess[0] == 'é©¬') {
        getMaRoad(chessMap, roads, x, y);
    }
    if (chess[0] == 'è±¡' || chess[0] == 'ç›¸') {
        getXiangRoad(chessMap, roads, x, y, chess[1]);
    }
    if (chess[0] == 'å£«' || chess[0] == 'ä»•') {
        getShiRoad(chessMap, roads, x, y, chess[1]);
    }
    if (chess[0] == 'ç‚®' || chess[0] == 'ç ²') {
        getPaoRoad(chessMap, roads, x, y)
    }
    if (chess[0] == 'å’' || chess[0] == 'å…µ') {
        getZuRoad(chessMap, roads, x, y, chess[1]);
    }
    if (chess[0] == 'å°†' || chess[0] == 'å¸…') {
        getJiangRoad(chessMap, roads, x, y, chess[1]);
        isAlive = true;
    }
    for (let i = 0; i < roads.length; i++) {
        let road = roads[i];
        object.showRoad(chess[0], road._x, road._y, road.x, road.y);
    }
}
```
> è¿™ä¸€å¤„æ˜¯çº¯è‡ªå·±å®ç°çš„å“¦ï¼Œæ­¤å¤„å¯ä»¥æœ‰ä¸“åˆ©O(âˆ©_âˆ©)O

> å¤§æ¦‚å°±æ˜¯ï¼Œç‚¹å‡»äº‹ä»¶åï¼Œé€šè¿‡`clientX`å’Œ`clientY`è®¡ç®—é‚£ä¸ªä½ç½®æ‰€åœ¨çš„æ£‹å­æ˜¯ä»€ä¹ˆ xiang'qi

> ç„¶åç¬¬äºŒæ¬¡ç‚¹å‡»äº‹ä»¶åï¼Œé€šè¿‡`clientX`å’Œ`clientY`è®¡ç®—ç›®æ ‡ä½ç½®æ˜¯ä»€ä¹ˆï¼Œä¸ç®¡é‚£ä¸ªä½ç½®æ˜¯ä»€ä¹ˆï¼Œåªè¦åœ¨é€‰ä¸­æ£‹å­çš„åˆè§„è½å­èŒƒå›´å†…ï¼Œéƒ½æŠŠæ£‹å­èµ°è¿‡å»å°±OKå•¦

> ç„¶åæ ¹æ®æ–°å¾—`Map`é‡ç»˜`Canvas`

![ç‚¹å‡»ç‚®åçš„æ•ˆæœ](https://img-blog.csdnimg.cn/20190218221710817.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3E3MjM4OTI2eg==,size_16,color_FFFFFF,t_70#pic_center=500x)
## å°èŠ±çµ®
> æˆŠæˆŒå¹´çš„é™¤å¤•ï¼Œç»™çˆ·çˆ·çœ‹äº†æˆ‘è¿™ä¸ªåˆç‰ˆ

> æˆ‘ï¼šæˆ‘å†™äº†ä¸ªç”µè„‘ï¼Œå¯æ˜¯æ€ä¹ˆä¸‹ï¼Œä»–éƒ½èµ°çš„ä¸å¯¹

> çˆ·çˆ·ï¼šæ…¢æ…¢æ¥ä¹ˆï¼Œåƒä»¥å‰æ¸¸æˆæœºé‡Œçš„é‚£ä¸ªè€äººã€ä¸­å¹´äººã€é•¿å¤´å‘çš„å¥³çš„å’Œå°å­©ï¼Œä½ å…ˆè¯•ç€æŠŠé‚£ä¸ªå°å­©ä¸‹èµ¢å˜›

> æˆ‘ï¼šå“¦å“¦ï¼Œå¯¹çš„ï¼Œæˆ‘å…ˆä¸€æ­¥æ­¥æ¥ğŸ˜€

> ==æœ€åçš„æœ€å==ï¼Œåœ¨å·±äº¥çš„æ­£æœˆåˆä¸€å®Œæˆäº†æˆ‘çš„ç®—æ˜¯ä¸€ä¸ªå®Œæ•´ç‰ˆï¼Œçˆ·çˆ·å¾ˆè®¤çœŸçš„å’Œæˆ‘çš„AIä¸‹äº†ä¸€å±€

> æˆ‘è¿˜æ˜¯å®Œè´¥ï¼Œå“ˆå“ˆå“ˆğŸ˜­ï¼Œåæ¥äº‹å®è¯æ˜æˆ‘çš„ç¡®å†™äº†ä¸ªç¬¨å‘¼å‘¼çš„AIå‘¢ï¼ˆå®ƒä¹ŸåŒæ ·è¾“ç»™äº†å°é’å’Œæˆ‘å¦¹å¦¹ï¼‰ï¼Œä¹‹åå†ä¼˜åŒ–å§~ä½†æ„Ÿè§‰å¿ƒé‡Œè¿˜æ˜¯è›®å¼€å¿ƒçš„

> å‘ç°CSDNå‘å¸ƒæ–‡ç« >æ”¹æ–‡ç« >é‡æ–°å‘å¸ƒ å¯ä»¥åˆ·ç§¯åˆ†è€¶( â€¢Ì€ Ï‰ â€¢Ì )y
### çˆ·çˆ·å£ä¸­çš„é‚£ä¸ªæ¸¸æˆ
![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://img-blog.csdnimg.cn/20190218223556616.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3E3MjM4OTI2eg==,size_16,color_FFFFFF,t_70#pic_center=500x)
![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://img-blog.csdnimg.cn/20190218223650695.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3E3MjM4OTI2eg==,size_16,color_FFFFFF,t_70#pic_center=500x)
## é¡¹ç›®åœ°å€
https://gitee.com/ko-orz/chinese_chess/
## é¢„è§ˆåœ°å€
https://www.maxmon.top/chinese_chess/
## ç‰¹åˆ«æ„Ÿè°¢
[1] æ¬²æ³ªæˆé›ª. [HTML5å­¦ä¹ æ€»ç»“â€”â€”canvasç»˜åˆ¶è±¡æ£‹(canvasç»˜å›¾)](https://www.cnblogs.com/SeeYouBug/p/html_canvas_seeyoubug.html) 2016-11-24 18:03
[2] è¶…é€¸_æµ. [è±¡æ£‹AIç®—æ³•ï¼ˆä¸€ï¼‰](https://blog.csdn.net/u012723995/article/details/47133693) 2015-07-29 21:29:28
[3] è¶…é€¸_æµ. [è±¡æ£‹AIç®—æ³•ï¼ˆäºŒï¼‰](https://blog.csdn.net/u012723995/article/details/47143569) 2015-07-30 14:11:37
[4] å†™äº†è¿™ç¯‡æ–‡ç« çš„2019å¹´02æœˆ18æ—¥22æ—¶41åˆ†çš„Maxmon